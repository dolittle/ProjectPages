
<html>
	<head>
		<title></title>
	</head>
	<body>
		<div class="row">
			<div class="span6">
				<pre class="prettyprint">
					<xmp class="prettyprint">
<div data-bind="feature:feature"></div>
					</xmp>
				</pre>
			</div>
				
		</div>
		
		<div class="row">
			<div class="span6">
				<pre class="prettyprint">
					<xmp class="language-cs">
public class CreatePostInputValidator : 
		CommandInputValidator<CreatePost>
{
	public CreatePostInputValidator()
	{
		RuleFor(c=>c.Title)
			.NotEmpty()
			.WithMessage("Title is required");				
	}					
}				
					</xmp>
				</pre>
			</div>

			<div class="span6">
				<pre class="prettyprint">
					<xmp class="language-cs">
public class CreatePostBusinessValidator : 
	CommandBusinessValidator<CreatePost>
{

	public override IEnumerable<ValidationResult> 
				Validate(CreatePost create)
	{
		// Do funkiness
		return new ValidationResult[0];					
	}					
}				
					</xmp>
				</pre>
			</div>
		</div>

		<div class="row">
			<div class="span6">
				<pre class="prettyprint">
					<code class="language-cs">
public class CreatePost : Command
{
	public Guid PostId { get; set; }				
	public string Title { get; set; }
	public string Body { get; set; }				
}				
					</code>
				</pre>
			</div>
		
			<div class="span6">
				<pre class="prettyprint">
					<code class="language-cs">
public class PostCommandHandlers : ICommandHandler
{
	IAggregatedRootRepository<Post> _repository;
				
	public PostCommandHandlers(
			IAggregatedRootRepository<Post> repository)
	{
		_repository = repository;
	}
				
	public void Handle(CreatePost create)
	{
		var post = _repository.Get(create.PostId);
		post.Create(create.Title, create.Body);
	}
}				
					</code>
				</pre>
			</div>
		</div>		
		
		<div class="row">
			<div class="span6">
				<pre class="prettyprint">
					<code class="language-cs">
public class Post : AggregatedRoot
{
	public Post(Guid id) : base(id)
	{
	}				

	public void Create(string title, string body)
	{
		Apply(new PostCreated(Id) 
				{ Title=title, Body=body});
	}
}				
					</code>
				</pre>
			</div>

			<div class="span6">
				<pre class="prettyprint">
					<code class="language-cs">
public class PostCreated : Event
{
	public PostCreated(Guid id) : base(id) {}				
	public string Title { get; set; }
	public string Body { get; set; }				
}				
					</code>
				</pre>
			</div>

		</div>
		
		<div class="row">
			<div class="span6">
				<pre class="prettyprint">
					<code class="language-cs">
public class PostSubscribers : IEventSubscriber
{
	public void Process(PostCreated created)
	{
		// Persist somewhere			
	}				
}				
					</code>
				</pre>
			</div>
		
			<div class="span6">
				<pre class="prettyprint">
					<code class="language-cs">
					</code>
				</pre>
			</div>
		
		</div>
	</body>
</html>
